extends layouts/layout.pug

block scripts
  script.
    window.addEventListener('load', function() {
      const input = document.getElementById('original')
      const preview = document.getElementById('preview')
      input.addEventListener('input',_.debounce((e) => {
        preview.src = e.target.value
      }, 300))
    })

block content
  - var invalid = errors && errors.length > 0
  form.mt-4.mx-auto.needs-validation(action='submit' method='post' style={'max-width': '562px'} novalidate)
    .mb-3
      label.form-label(for="original") Original URL
      input.form-control(type="url" placeholder="Enter link here" name="original" id="original" class=invalid ? 'is-invalid' : '' autofocus required)
      .valid-feedback Looks good.
      if invalid
        each error in errors
          .invalid-feedback= error.msg
      .form-text Your link will be converted to a nice short form.
    h3.mt-4 Preview
    .my-3
      iframe#preview.w-100(src=url.original, frameborder="0" height="300px")
    button.btn.btn-primary(type="submit") Submit
